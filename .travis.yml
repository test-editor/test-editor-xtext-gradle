language: nix
sudo: false
cache:
  directories:
  - "$HOME/nix.store"
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
before_install:
- sudo mkdir -p /etc/nix
- echo "substituters = https://cache.nixos.org/ file://$HOME/nix.store" | sudo tee -a /etc/nix/nix.conf > /dev/null
- echo 'require-sigs = false' | sudo tee -a /etc/nix/nix.conf > /dev/null
before_cache:
- mkdir -p $HOME/nix.store
- nix copy --to file://$HOME/nix.store -f default.nix buildInputs
script: nix-shell --command "./gradlew assemble check install"
after_success:
- bash <(curl -s https://codecov.io/bash)
- nix-shell --command "./.travis-publishOnRelease.sh"  # publishes only if tagged with v.*
env:
  global:
    - # Environment variable for WebDriverManager see https://github.com/bonigarcia/webdrivermanager#known-issues
    - secure: "ddkwmbPP0t2zisc0eLwIydX3wieVydcsBeQ8e9Bw7Pbn7/zAhYuFO7YjjNGHJD0dVspFVewfDqVmojZNmKkMAN40wJmeX592pkTzhmeLXNu62z4D265dFM1KBSPHloBQw6OZHsR6lcoYRKWNeVQqrcDVGT75iD6h51cy9bVG+6DTpT+gdvKQtQnUz2YNemkV/LfE95GrFVNAE5t5uMx69blOCursyr+IdGvDMo1eRn6HUa5D5B6Dg54ykXBEwdJrZhju3ngBLWj+ZsUjYxTxz+dA8ErSsIabY+7O/GFzUj5g10PGkqnQRJTwrA3HCrMTEYbxJjPNWPmMp29YEhY8oaZzYsCbtcusix0C5ieUjzSZKUdEF25kKrGxPBptfEZ8CrVAPzCJYGpJCPRu/uqIKZuOVG3RiItt1g2VwykdACApyUiyRiw89iHBOJNmaTFb7rtIG6VHcKnO5UEl5t4K1tGgWmOF+I67rRlOFlY9HPOzPVNkNX6dGSAOfrb0IvMpQAmcCdBmKgPlFE+tFVMik9eBvOTYFlZoZPSkeESZiK1MZYA0IScWQCwevmZ4lot1jwso1sYHE4iRmOVEAfOX9Kac55FO9m8KkxxtpXe2eTIuPV4QRT+nzH+CYQWIIssfQ2dsldEAnFM+EoHg53xR6/EmP0L4B3keFD9I3m1nCzU="
    - secure: "KS0T+dSnobr3nSvAWVoCg9AwM93wp6XJ25Po3xv9fZx/L/cgOxqegCu9M2hl/2Jj00La2OFmOV34phiS1k8jhZHr8kshVDzV3W3Ja0QU2nvgSSPEcQezf5OS9px5GwzpSTCIXUbU/+2dc0Hzv3lWDjForQBlKebybZoWd1bcjz6MkDC8VF5mPzFoV97SBNnuvRu5v2sJz1Aedq/pY2B4CvpDICSa/RzY3gjgZj5qdaJ8vmZSHs3QZ4WPQjBYet3j4D9zRZgFdnFvfFR/d/RDF2kvGReAelNg1Pj0zLPtFQa34EK8dwOTu5355SFAuKM426vwNqOKvzng+rJMLllizPDA3sZvwEMhWpG3O5iT3Qpq0LuzygJJnZSTk6QWeTVcyTuxzm8bjYRZCa5niCjKVT8i7tREh+kqRK10vLQiGshVh8esX2Z7XsZSEYwQIZU5E/ervDL9uKV+rJU6/hRFB9p1Erxo1S965ym9/LkhFTu3qovMcvhAT3TJF9xpizvYj23LSETJblco7rmK8fWlaHOROGYdo8zh2jK4Pe4myQjYbgvAkenDjAPYdeCO5k0qTD6GPPOzI+e+L6MuXN1RC8ytuMyCTcixN8afz+gdj53FvqJQEmSTnHM/aI4hI3JiZ6FNsfQcGKmEfWVGZbfgMylcAkWGR0BNa3821oJsxkU="
    - # Environment variables for BINTRAY Deployment
    - secure: "Mda4bzquybfb6C9c80IMbz2bGchK+POn4m6AqaXcTJ/6cB4A5NOYPk3gE/TqvYVKp+elIvy/cPuGzTtkChHf+hxCsifsmA9hapaCx/tGXt5ZlI7xos5vQNvDViM+MdhI28ZWhrekrS6UT2EhBUiWR7vqDZ8j6tX6GH+eEDduPJhKK6Eesa88S40P3/4WoyfYkjwuvEDJBk5shzKRg1MrnWAp9TwcqcqhC0+yTQDe6freTncgKsmhoSUG7Hs2ju1kRs/kWbad+Lnvb4g6j4/UyurFSefa5vfHu4To2/vMhlI1NJZ6qudqqbryc3OTepp/iAPl/tEgsqkYpGdZMp+CqPKloCDT7lptSjS0VluNeWzEf2r6Q4+DPPNpP4xBQz8ED9xJgfO/H7koT7coD6ht+WYH3C6S7Lq5OAngIkWuX4htwj0NObZ1su5wzOqCWTofewEHqlQKD+/sdyzvpU/lDkrsQWQx7E9LAYq1sL91FgLDMTx1RFGmqGctfcFHbtWFI78n0QYKMBVqhJkIqK7P3LAU75vWwyEnqgRJBqsj8v+Zp0VSHxG21rUIAGzJhugxxoiv8bDMJcq4YJN1sWc5mAwjmwiQ4p4nqf6YnLTEykc19rsdIZnP5At7cmF5xRDlqh5FA04b4r6fQJsaDzV6VtoPsnoRQyI0lOyeRNW+zFY="
    - secure: "iMiw0SbIJXvBaxhVEXFsZIqdzxl11gl6emJz2mxT4TlmcGoY0RUZq2ljFRKk1aAQGfDdyblCGPCMi3dlBZp9zmzpkc6iu/XU8rCZPShUPH1Ae3EoZtYLRm/aFnAAvI3nU6iQRsJ5XsTvjkrenz4D33XG77lfGwPMoBP65/k1Pv52b4wt9NoFFYmf2p5lWjDh8TtEfYSvFMQTUVEOYlBhTBXypLpkisW2m5+FNKs2DNjnQkiujbiPv4oOUhVXfnM/TGpWb0zmfSAW8QIKjgAn3PApSFowdhiccqV6hz5WINazMmoIU5x6wbLkDNgc+IQUMYtypI+FVNAZzrHHQ1unKeQcoiWEutWnwuQKTCGAq+0lSq+kugoBdR0dAAlelYMIBa02AQ3OTz48Ial/s7fyNg4HdXZvT3QDDNJtEmA2yruuxAr/1sNMGkJK5WfcTYvpNohiuO6FWm5OVGtsdLBVxlqpQ3thr4rg2bX5YyDuRuhAOiZnROyZtBdoshtcFBO+8cio8BquaS5lXxzoDH2uWvtVCpS/i/aonME/TwTVisK8MwcuBM/UX1ZV7Hwkk6i8yKzB0QBMhz+nC8YXC/hmMDmGh2rxWMy5Ws0o8lZIUOlzq36FRxl1iNABINlkc5aK2XnR35W88DHW3OMe+sqtUDa/HHRLm2Kq5hwv3E7N8J4="
    - # Environment variables for GITHUB
    - secure: "dNg08xDevrlb2K/5A4ZVDoGrwLuaHbtCp+VtjYjEy0YihwMbbIa/Nam7+nNKs6G4/oyjm9PA6hubW3ptzT4u4yp8n09aHfGuGJPJBo7XziZpIsj32J6E86I3q3mWslmAW7dSzsWmyVv6sPiK8AQxa7LOljkccxSkJmfaAmsta94FzowIjrKkJ2un51XIVu4h6/DAH7ivy9Xb2fWRim51Xjbz6Nu00ZEUZ9Xvnhvu38tWaiJhSp5d38jKKnLGo0duGoLhN+1H85UpzlkTDa2rK1GulWMf8yh6o8TxPlAdg9ACzXsZgmHlX8KOT13Iz+n963hIlyu9GW+OOG6C8G+iXS7MOFmpAKtuKCj/eR6f1CnGRvjcVD+YC84Dpuotp8GW7H55fYXe8s9XI27wPtsZOjYrT1PAtkqxG/DUgUNIenLPYslwpOZYg0wwUa6nHG6bsCA1IgcuKmDue7F6rP9xR+4K1aNsgKmLVGJNi2RSxcdH7cbch3bXtFliopM20wv4abJFMs2zGBxbC5uAiRiStZ7yjXOGM/oMQaisgeiOsTqgBo5BYFsrKEjJrqeF/40nKQpc1l1zeD9G+6ZI7s2RSSjz7AqO/dko5fKcX6QV9+BTw6KBl+06xH43huZBBzqi/z337C8xTBLXXpOaJMVB1beQY/p5pLyapp2YR2T7k9Y="
    - secure: "hD0w7g4TAbbRFnumh/Id4OAvjkI5JMgdSZlcrqYqusMdjQe1FCJ68hW2p8fJ50HLMSJBVclYT+JE6Xdz8hq+T9O18Rw3eKY80tZXIJ6pxMpRb2J/PLbr12UOfDFOQjLDvi6nOcRN3BrB5WmHbasaEyYFQRIdA47S3tt1fFSyhVkOvzqHrNBHvP+BXNbauthya11Qvwm9uVfuOapM+ezrS2CYeeMzThRrTJLEcVkVbkSz7Vogmi9kxFuFo2M8jbTQ0RVJDx1alnAUaH5kMMvcUxtdrcXn3/l6Cy1/vyGJlLEggTri+QDL05san4iTCbVcUlF6hixm8siIKnRdPfaXvj1Je1xx49dwqmaW2uH8vJVWxKre0wjCGFUEvEVg5Paj4LdCQWkNn1D9HjRb1jk1pJU1/bsz9vrIN/NwzHYF3ar18i+qdDF6qDHZdrkhXTYi8PYbVf+F9L2VlIqwEmaVxAgx184rDaI6PNmYYhI5jdktX20+8Yqz03G53xypfoiLyZsmJ4aAqnwRWQ3B/OkJcSBQ8kEH2UisGNV+meTl0/MS5C22wxqYr2qdBVHOf8H4a4x4qws8xiw3VRKwrtHzhwkuOm2uyFmzE6eA2ophh2svmvNwAtODyFytFmgyPMe3ZtRufB7eAu4qJ/3xl30F5neBDaLyM0/z+o0/x9dilZw="
